{"version":3,"sources":["felixhayashi/tiddlymap/js/lib/url.js"],"names":["Url","url","this","paths","prefix","i","s","length","encode","join","slice","split","path","decode","isAbsolute","protocol","charAt","user","pass","toString","host","port","query","parse","hash","defaultPorts","ftp","gopher","https","document","ws","createElement","wss","self","link","d","map","location","href","auth","match","replace","base","basePath","selfPath","props","pop","test","shift","parseQs","encodeURIComponent","n1","code","hex1","hex2","hex3","parseInt","n2","String","fromCharCode","n3","n","re","key","decodeURIComponent","push","value","clear","hex","qs","count","exec","Function","isEmpty","Array","ii","e","len"],"mappings":"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","file":"../../../../../felixhayashi/tiddlymap/js/lib/url.js","sourcesContent":["// @preserve\n/*\\\n\ntitle: $:/plugins/felixhayashi/tiddlymap/js/URL\ntype: application/javascript\nmodule-type: library\n\n@preserve\n\n\\*/\n\n/*** Code **********************************************************/\n\n/**\n * <<<\n * Lightweight URL manipulation with JavaScript. This library is\n * independent of any other libraries and has pretty simple interface\n * and lightweight code-base. Some ideas of query string parsing\n * had been taken from Jan Wolter.\"\n *\n * @see http://unixpapa.com/js/querystring.html\n * @license MIT\n * @author Mykhailo Stadnyk <mikhus@gmail.com>\n * <<< https://github.com/Mikhus/jsurl\n *\n * @class\n * @param {string} url\n */\nfunction Url( url) {\n  this.paths = function( paths) {\n    var prefix = '', i = 0, s;\n\n    if (paths && paths.length && paths + '' !== paths) {\n      if (this.isAbsolute()) {\n        prefix = '/';\n      }\n\n      for (s = paths.length; i < s; i++) {\n        paths[i] = encode(paths[i]);\n      }\n\n      this.path = prefix + paths.join('/');\n    }\n\n    paths = (this.path.charAt(0) === '/' ?\n      this.path.slice(1) : this.path).split('/');\n\n    for (i = 0, s = paths.length; i < s; i++) {\n      paths[i] = decode(paths[i]);\n    }\n\n    return paths;\n  };\n\n  this.encode = encode;\n  this.decode = decode;\n\n  this.isAbsolute = function() {\n    return this.protocol || this.path.charAt(0) === '/';\n  };\n\n  this.toString = function() {\n    return (\n      (this.protocol && (this.protocol + '://')) +\n      (this.user && (\n        encode(this.user) + (this.pass && (':' + encode(this.pass))\n      ) + '@')) +\n      (this.host && this.host) +\n      (this.port && (':' + this.port)) +\n      (this.path && this.path) +\n      (this.query.toString() && ('?' + this.query)) +\n      (this.hash && ('#' + encode(this.hash)))\n    );\n  };\n\n  parse( this, url);\n}\n\nvar\n    // mapping between what we want and <a> element properties\n  map = {\n    protocol : 'protocol',\n    host     : 'hostname',\n    port     : 'port',\n    path     : 'pathname',\n    query    : 'search',\n    hash     : 'hash'\n  },\n\n  defaultPorts = {\n    'ftp'    : 21,\n    'gopher' : 70,\n    'http'   : 80,\n    'https'  : 443,\n    'ws'     : 80,\n    'wss'    : 443\n  },\n\n  parse = function( self, url) {\n    var\n      d      = document,\n      link   = d.createElement( 'a'),\n      url    = url || d.location.href,\n      auth   = url.match( /\\/\\/(.*?)(?::(.*?))?@/) || [],\n      i\n      ;\n\n    link.href = url;\n\n    for (i in map) {\n      self[i] = link[map[i]] || '';\n    }\n\n      // fix-up some parts\n    self.protocol = self.protocol.replace( /:$/, '');\n    self.query    = self.query.replace( /^\\?/, '');\n    self.hash     = decode(self.hash.replace( /^#/, ''));\n    self.user     = decode(auth[1] || '');\n    self.pass     = decode(auth[2] || '');\n    self.port     = (\n        defaultPorts[self.protocol] == self.port || self.port == 0\n      ) ? '' : self.port; // IE fix, Android browser fix\n\n    if (!self.protocol && !/^([a-z]+:)?\\/\\//.test( url)) {\n        // is IE and path is relative\n      var\n        base     = new Url( d.location.href.match(/(.*\\/)/)[0]),\n        basePath = base.path.split( '/'),\n        selfPath = self.path.split( '/'),\n        props = [ 'protocol','user','pass','host','port' ],\n        s = props.length\n        ;\n\n      basePath.pop();\n\n      for (i = 0; i < s; i++) {\n        self[props[i]] = base[props[i]];\n      }\n\n      while (selfPath[0] == '..') { // skip all \"../\n        basePath.pop();\n        selfPath.shift();\n      }\n\n      self.path =\n          (url.charAt(0) != '/' ? basePath.join( '/') : '') +\n          '/' + selfPath.join( '/')\n        ;\n    }\n\n    else {\n        // fix absolute URL's path in IE\n      self.path = self.path.replace( /^\\/?/, '/');\n    }\n\n    self.paths((self.path.charAt(0) == '/' ?\n        self.path.slice(1) : self.path).split('/')\n      );\n\n    parseQs( self);\n  },\n\n  encode = function(s) {\n    return encodeURIComponent(s).replace(/'/g, '%27');\n  },\n\n  decode = function(s) {\n    s = s.replace( /\\+/g, ' ');\n\n    s = s.replace(/%([ef][0-9a-f])%([89ab][0-9a-f])%([89ab][0-9a-f])/gi,\n        function( code, hex1, hex2, hex3) {\n          var\n            n1 = parseInt( hex1, 16) - 0xE0,\n            n2 = parseInt( hex2, 16) - 0x80\n            ;\n\n          if (n1 == 0 && n2 < 32) {\n            return code;\n          }\n\n          var\n            n3 = parseInt( hex3, 16) - 0x80,\n            n = (n1 << 12) + (n2 << 6) + n3\n            ;\n\n          if (n > 0xFFFF) {\n            return code;\n          }\n\n          return String.fromCharCode( n);\n        }\n      );\n\n    s = s.replace( /%([cd][0-9a-f])%([89ab][0-9a-f])/gi,\n        function( code, hex1, hex2) {\n          var n1 = parseInt(hex1, 16) - 0xC0;\n\n          if (n1 < 2) {\n            return code;\n          }\n\n          var n2 = parseInt(hex2, 16) - 0x80;\n\n          return String.fromCharCode( (n1 << 6) + n2);\n        }\n      );\n\n    s = s.replace( /%([0-7][0-9a-f])/gi,\n        function( code, hex) {\n          return String.fromCharCode( parseInt(hex, 16));\n        }\n      );\n\n    return s;\n  },\n\n  parseQs = function( self) {\n    var qs = self.query;\n\n    self.query = new (function( qs) {\n      var re = /([^=&]+)(=([^&]*))?/g, match;\n\n      while ((match = re.exec( qs))) {\n        var\n          key = decodeURIComponent(match[1].replace(/\\+/g, ' ')),\n          value = match[3] ? decode(match[3]) : ''\n          ;\n\n        if (this[key] != null) {\n          if (!(this[key] instanceof Array)) {\n            this[key] = [ this[key] ];\n          }\n\n          this[key].push( value);\n        }\n\n        else {\n          this[key] = value;\n        }\n      }\n\n      this.clear = function() {\n        for (var key in this) {\n\n          if (!(this[key] instanceof Function)) {\n\n            delete this[key];\n          }\n        }\n      };\n\n      this.count = function() {\n        var count = 0, key;\n        for (key in this) {\n\n          if (!(this[key] instanceof Function)) {\n            count++;\n          }\n        }\n        return count;\n      };\n\n      this.isEmpty = function() {\n        return this.count() === 0;\n      };\n\n      this.toString = function() {\n        var s = '', e = encode, i, ii;\n\n        for (i in this) {\n\n          if (this[i] instanceof Function) {\n            continue;\n          }\n\n\n          if (this[i] instanceof Array) {\n\n            var len = this[i].length;\n\n            if (len) {\n              for (ii = 0; ii < len; ii++) {\n                s += s ? '&' : '';\n\n                s += e( i) + '=' + e( this[i][ii]);\n              }\n            }\n\n            else {\n                // parameter is an empty array, so treat as\n                // an empty argument\n\n              s += (s ? '&' : '') + e( i) + '=';\n            }\n          }\n\n          else {\n            s += s ? '&' : '';\n\n            s += e( i) + '=' + e( this[i]);\n          }\n        }\n\n        return s;\n      };\n    })( qs);\n  }\n  ;\n\n/*** Exports *******************************************************/\n\nexport default Url;\n"],"sourceRoot":"../../../../../../src/plugins"}